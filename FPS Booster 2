print("Successfully executed")

local ToDisable = {
	Textures = true,
	VisualEffects = true,
	Parts = true,
	Particles = true,
	Sky = true,
	Accessories = true,
	Meshes = true,
	Terrain = true,
	GUIs = true
}

local ToEnable = {
	FullBright = false
}

local TOGGLE_KEY = Enum.KeyCode.RightShift

local Lighting = game:GetService("Lighting")
local UserInputService = game:GetService("UserInputService")
local Terrain = workspace:FindFirstChildOfClass("Terrain")
local TestService = game:GetService("TestService")

local isLowGraphics = false
local Modified = {}

-- Save & Apply Low Graphics
local function applyLowGraphics()
	for _, v in ipairs(game:GetDescendants()) do
		local info = {}

		if ToDisable.Parts and v:IsA("BasePart") then
			info.Material = v.Material
			info.Transparency = v.Transparency
			info.CastShadow = v.CastShadow

			v.Material = Enum.Material.SmoothPlastic
			v.Transparency = 0.8
			v.CastShadow = false

			Modified[v] = info

		elseif ToDisable.Particles and (v:IsA("ParticleEmitter") or v:IsA("Smoke") or v:IsA("Explosion") or v:IsA("Sparkles") or v:IsA("Fire")) then
			info.Enabled = v.Enabled
			v.Enabled = false
			Modified[v] = info

		elseif ToDisable.VisualEffects and (v:IsA("BloomEffect") or v:IsA("BlurEffect") or v:IsA("DepthOfFieldEffect") or v:IsA("SunRaysEffect")) then
			info.Enabled = v.Enabled
			v.Enabled = false
			Modified[v] = info

		elseif ToDisable.Textures and (v:IsA("Decal") or v:IsA("Texture")) then
			info.Texture = v.Texture
			v.Texture = ""
			Modified[v] = info

		elseif ToDisable.Sky and v:IsA("Sky") then
			v:Destroy()

		elseif ToDisable.Accessories and (v:IsA("Accessory") or v:IsA("Hat")) then
			v:Destroy()

		elseif ToDisable.Meshes and v:IsA("MeshPart") then
			info.Transparency = v.Transparency
			v.Transparency = 1
			Modified[v] = info

		elseif ToDisable.GUIs and (v:IsA("BillboardGui") or v:IsA("SurfaceGui") or v:IsA("ScreenGui")) then
			if v:IsA("ScreenGui") and v.ResetOnSpawn then continue end
			info.Enabled = v.Enabled
			v.Enabled = false
			Modified[v] = info
		end
	end

	if ToDisable.Terrain and Terrain then
		Terrain:Clear()
	end

	if ToEnable.FullBright then
		Lighting.FogColor = Color3.new(1, 1, 1)
		Lighting.FogStart = math.huge
		Lighting.FogEnd = math.huge
		Lighting.Ambient = Color3.new(1, 1, 1)
		Lighting.OutdoorAmbient = Color3.new(1, 1, 1)
		Lighting.Brightness = 5
	end

	TestService:Message("[LowGraphics] ON - Modified " .. tostring(#Modified))
end

-- Restore Original Graphics
local function restoreGraphics()
	for obj, info in pairs(Modified) do
		if obj and obj.Parent then
			pcall(function()
				for prop, value in pairs(info) do
					obj[prop] = value
				end
			end)
		end
	end
	Modified = {}
	TestService:Message("[LowGraphics] OFF - Restored visuals.")
end

-- Toggle with Key
UserInputService.InputBegan:Connect(function(input, gp)
	if gp then return end
	if input.KeyCode == TOGGLE_KEY then
		isLowGraphics = not isLowGraphics
		if isLowGraphics then
			applyLowGraphics()
		else
			restoreGraphics()
		end
	end
end)
